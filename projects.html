<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Riste Lalkov – Projects</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <!-- Ensure Learn More buttons don’t stretch full width -->
  <style>
    .project-link {
      align-self: flex-start;
    }
  </style>
</head>

<body>
  <nav class="sticky-nav">
    <div class="container nav-container">
      <div class="logo">Riste Lalkov</div>
      <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
      ☰
    </button>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="projects.html" class="active">Projects</a></li>
        <li><a href="experience.html">Experience</a></li>
        <li><a href="education.html">Education</a></li>
        <li><a href="skills.html">Skills</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
  </nav>

  <main class="container main-content">
    <section class="projects-section fade-in">
      <h2 class="section-title">Projects</h2>
      <div class="projects-grid">

        <!-- ESAP -->
        <div class="project-card">
          <img src="projects/esap.png" alt="Esap App Screenshot" class="project-img" />
          <h3 class="project-title">Esap</h3>
          <p class="project-desc">
            Flutter application for financial management & document archiving.
          </p>
          <a href="https://play.google.com/store/apps/details?id=com.codex.moj_esap&hl=mk" target="_blank"
            class="project-link">View on Play Store</a>
          <a href="#" class="project-link" data-gallery="esap_screenshots" data-count="16">Learn More</a>
        </div>

        <!-- cxParkingSystem -->
        <div class="project-card">
          <img src="projects/parking.png" alt="cxParkingSystem" class="project-img" />
          <h3 class="project-title">cxParkingSystem</h3>
          <p class="project-desc">
            City Parking Management App for real-time SMS payment checks.
          </p>
          <a href="#" class="project-link" data-gallery="parking_screenshots" data-count="8">Learn More</a>
        </div>

        <!-- cxOsSredstva -->
        <div class="project-card">
          <img src="projects/ossredstva.png" alt="cxOsSredstva" class="project-img" />
          <h3 class="project-title">cxOsSredstva</h3>
          <p class="project-desc">
            Kotlin-based asset tracker with live updates & auditing.
          </p>
          <a href="#" class="project-link" data-gallery="ossredstva_screenshots" data-count="0">Learn More</a>
        </div>

        <!-- SterilizationTA -->
        <div class="project-card">
          <img src="projects/sterilization.png" alt="SterilizationTA" class="project-img" />
          <h3 class="project-title">SterilizationTA</h3>
          <p class="project-desc">
            Android sterilization workflow app with barcode & NFC scans.
          </p>
          <a href="#" class="project-link" data-gallery="sterilization_screenshots" data-count="11" data-ext="png">Learn
            More</a>
        </div>

        <!-- cxOmniBus -->
        <div class="project-card">
          <img src="projects/omnibus.png" alt="cxOmniBus" class="project-img" />
          <h3 class="project-title">cxOmniBus</h3>
          <p class="project-desc">
            Multi-platform digital signage with playlist & device pairing.
          </p>
          <a href="#" class="project-link" data-gallery="omnibus_screenshots" data-count="5">Learn More</a>
        </div>

      </div>
    </section>
  </main>

  <footer class="footer">
    <p>© 2025 Riste Lalkov</p>
  </footer>

  <!-- Modal Lightbox with Prev/Next -->
  <div id="lightbox" class="modal">
    <span class="modal-close">&times;</span>
    <button class="modal-nav modal-prev">&#8249;</button>
    <img class="modal-img" src="" alt="" />
    <button class="modal-nav modal-next">&#8250;</button>
    <div class="modal-caption"></div>
  </div>

  <script>

    // grab the toggle button and the links container
  const navToggle = document.querySelector('.nav-toggle');
  const navLinks  = document.querySelector('.nav-links');

  navToggle.addEventListener('click', () => {
    // show/hide the menu
    const isOpen = navLinks.classList.toggle('open');
    // update aria-expanded for accessibility
    navToggle.setAttribute('aria-expanded', isOpen);
  });

  // optional: close menu when you click a link
  navLinks.querySelectorAll('a').forEach(a =>
    a.addEventListener('click', () => navLinks.classList.remove('open'))
  );
  
    const lightbox = document.getElementById('lightbox');
    const imgEl = lightbox.querySelector('.modal-img');
    const captionEl = lightbox.querySelector('.modal-caption');
    const prevBtn = lightbox.querySelector('.modal-prev');
    const nextBtn = lightbox.querySelector('.modal-next');
    let galleryImages = [], currentIndex = 0;

    function showImage(idx) {
      imgEl.src = galleryImages[idx];
      captionEl.textContent = `${idx + 1} of ${galleryImages.length}`;
      lightbox.classList.add('show');
    }

    document.querySelectorAll('.project-link[data-gallery]').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const folder = link.dataset.gallery;
        const count = parseInt(link.dataset.count, 10);
        const ext = link.dataset.ext || 'jpg';                // read extension
        const key = link.dataset.key || folder.replace('_screenshots', '');

        galleryImages = Array.from({ length: count }, (_, i) =>
          `projects/${folder}/${key}${i + 1}.${ext}`               // use .png or .jpg
        );
        currentIndex = 0;
        showImage(0);
      });
    });


    prevBtn.addEventListener('click', e => {
      e.stopPropagation();
      currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
      showImage(currentIndex);
    });
    nextBtn.addEventListener('click', e => {
      e.stopPropagation();
      currentIndex = (currentIndex + 1) % galleryImages.length;
      showImage(currentIndex);
    });

    lightbox.querySelector('.modal-close').onclick = () =>
      lightbox.classList.remove('show');
    lightbox.onclick = e => {
      if (e.target === lightbox) lightbox.classList.remove('show');
    };
  </script>
</body>

</html>